module.exports=function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=49)}([function(t,e){t.exports=flarum.core.compat.Model},function(t,e){t.exports=flarum.core.compat.extend},function(t,e,a){"use strict";function n(t){return t.slice(0).sort((function(t,e){var a=t.position(),n=e.position();if(null===a&&null===n)return e.discussionCount()-t.discussionCount();if(null===n)return-1;if(null===a)return 1;var r=t.parent(),o=e.parent();return r===o?a-n:r&&o?r.position()-o.position():r?r===e?1:r.position()-n:o?o===t?-1:a-o.position():0}))}a.d(e,"a",(function(){return n}))},function(t,e,a){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}a.d(e,"a",(function(){return n}))},function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a(12),r=a.n(n);function o(t,e,a){void 0===e&&(e={}),void 0===a&&(a={});var n=t&&t.icon(),o=a.useColor,i=void 0===o||o;return e.className=r()([e.className,"icon",n?t.icon():"TagIcon"]),t?(e.style=e.style||{},n?e.style.color=i?t.color():"":e.style.backgroundColor=t.color()):e.className+=" untagged",n?m("i",e):m("span",e)}},function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a(11),r=a.n(n),o=a(4);function i(t,e){void 0===e&&(e={}),e.style=e.style||{},e.className="TagLabel "+(e.className||"");var a=r()(e,"link"),n=t?t.name():app.translator.trans("flarum-tags.lib.deleted_tag_text"),i=t.imagePath();if(t){var s=t.color();s&&(e.style.backgroundColor=e.style.color=s,e.className+=" colored"),a&&(e.title=t.description()||"",e.href=app.route("tag",{tags:t.slug()}),e.config=m.route),""!=i&&(e.className="")}else e.className+=" untagged";return m(a?"a":"span",e,m("span",{className:"TagLabel-text"},t?""!=i?m("img",{src:i,height:"16.5em"}):n:t.icon()&&Object(o.a)(t,{},{useColor:!1})," "))}},,function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a(11),r=a.n(n),o=a(5),i=a(2);function s(t,e){void 0===e&&(e={});var a=[],n=r()(e,"link");return e.className="TagsLabel "+(e.className||""),t?Object(i.a)(t).forEach((function(e){(e||1===t.length)&&e.showInTagLabels()&&a.push(Object(o.a)(e,{link:n}))})):a.push(Object(o.a)()),m("span",e,a)}},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e,a){"use strict";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}a.d(e,"a",(function(){return n}))},function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var n=a(3),r=a(0),o=a.n(r),i=a(16),s=a.n(i),l=a(17),c=a.n(l),u=function(t){function e(){return t.apply(this,arguments)||this}return Object(n.a)(e,t),e}(s()(o.a,{name:o.a.attribute("name"),slug:o.a.attribute("slug"),description:o.a.attribute("description"),color:o.a.attribute("color"),backgroundUrl:o.a.attribute("backgroundUrl"),backgroundMode:o.a.attribute("backgroundMode"),icon:o.a.attribute("icon"),position:o.a.attribute("position"),parent:o.a.hasOne("parent"),defaultSort:o.a.attribute("defaultSort"),isChild:o.a.attribute("isChild"),isHidden:o.a.attribute("isHidden"),discussionCount:o.a.attribute("discussionCount"),lastPostedAt:o.a.attribute("lastPostedAt",o.a.transformDate),lastPostedDiscussion:o.a.hasOne("lastPostedDiscussion"),isRestricted:o.a.attribute("isRestricted"),canStartDiscussion:o.a.attribute("canStartDiscussion"),canAddToDiscussion:o.a.attribute("canAddToDiscussion"),imagePath:o.a.attribute("imagePath"),showInTagLabels:o.a.attribute("showInTagLabels"),displayOrder:o.a.attribute("displayOrder"),showonHomePage:o.a.attribute("showonHomePage"),bannerImagePath:o.a.attribute("bannerImagePath"),isPrimary:c()("position","parent",(function(t,e){return null!==t&&!1===e}))}))},function(t,e){t.exports=flarum.core.compat["utils/extract"]},function(t,e){t.exports=flarum.core.compat["utils/classList"]},function(t,e){t.exports=flarum.core.compat["components/PermissionGrid"]},,function(t,e){},function(t,e){t.exports=flarum.core.compat["utils/mixin"]},function(t,e){t.exports=flarum.core.compat["utils/computed"]},function(t,e){t.exports=flarum.core.compat["components/Page"]},function(t,e){t.exports=flarum.core.compat["components/Modal"]},function(t,e,a){"use strict";var n=a(2),r=a(10),o=a(7),i=a(4),s=a(5);e.a={"tags/utils/sortTags":n.a,"tags/models/Tag":r.a,"tags/helpers/tagsLabel":o.a,"tags/helpers/tagIcon":i.a,"tags/helpers/tagLabel":s.a}},function(t,e){t.exports=flarum.core},,,,,,function(t,e,a){"use strict";var n=a(9),r=a(10),o=a(1),i=a(13),s=a.n(i),l=a(39),c=a.n(l),u=a(40),d=a.n(u),p=a(8),f=a.n(p),g=a(5),h=a(4),v=a(2),b=function(){Object(o.override)(app,"getRequiredPermissions",(function(t,e){var a=e.match(/^tag\d+\./);return a?t(e.substr(a[0].length)).map((function(t){return a[0]+t})):t(e)})),Object(o.extend)(s.a.prototype,"scopeItems",(function(t){Object(v.a)(app.store.all("tags")).filter((function(t){return t.isRestricted()})).forEach((function(e){return t.add("tag"+e.id(),{label:Object(g.a)(e),onremove:function(){return e.save({isRestricted:!1})},render:function(t){return"viewDiscussions"===t.permission||"startDiscussion"===t.permission||t.permission&&0===t.permission.indexOf("discussion.")?c.a.component({permission:"tag"+e.id()+"."+t.permission,allowGuest:t.allowGuest}):""}})}))})),Object(o.extend)(s.a.prototype,"scopeControlItems",(function(t){var e=Object(v.a)(app.store.all("tags").filter((function(t){return!t.isRestricted()})));e.length&&t.add("tag",d.a.component({className:"Dropdown--restrictByTag",buttonClassName:"Button Button--text",label:app.translator.trans("flarum-tags.admin.permissions.restrict_by_tag_heading"),icon:"fas fa-plus",caretIcon:null,children:e.map((function(t){return f.a.component({icon:!0,children:[Object(h.a)(t,{className:"Button-icon"})," ",t.name()],onclick:function(){return t.save({isRestricted:!0})}})}))}))}))},y=function(){Object(o.extend)(s.a.prototype,"moderateItems",(function(t){t.add("tag",{icon:"fas fa-tag",label:app.translator.trans("flarum-tags.admin.permissions.tag_discussions_label"),permission:"discussion.tag"},95)}))},w=a(41),_=a.n(w),E=a(42),T=a.n(E),x=a(3);function N(t,e,a){if(void 0===a)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=a}var L=function(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter((function(t){return 1===t.nodeType&&t.matches(e)}))},C=new Map,O=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach((function(e,a){t[a]=e})),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}(),P=function(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return C.has(t)||C.set(t,new O),C.get(t)};function I(t,e,a){if(t instanceof Array)for(var n=0;n<t.length;++n)I(t[n],e,a);else t.addEventListener(e,a),P(t).setData("event"+e,a)}function M(t,e){if(t instanceof Array)for(var a=0;a<t.length;++a)M(t[a],e);else t.removeEventListener(e,P(t).getData("event"+e)),P(t).deleteData("event"+e)}function D(t,e,a){if(t instanceof Array)for(var n=0;n<t.length;++n)D(t[n],e,a);else t.setAttribute(e,a)}function H(t,e){if(t instanceof Array)for(var a=0;a<t.length;++a)H(t[a],e);else t.removeAttribute(e)}var A=function(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},S=function(t,e){var a;return void 0===e&&(e=0),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];clearTimeout(a),a=setTimeout((function(){t.apply(void 0,n)}),e)}},j=function(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)},F=function(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode},k=function(t,e,a){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===a?t:t.nextElementSibling)},B=function(t,e){return k(t,e,"before")},Y=function(t,e){return k(t,e,"after")},R=function(t,e,a){if(void 0===e&&(e=function(t,e){return t}),void 0===a&&(a=function(t){return t}),!(t instanceof HTMLElement)||!0==!t.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof e||"function"!=typeof a)throw new Error("You need to provide a valid serializer for items and the container.");var n=N(t,"opts").items,r=L(t.children,n),o=r.map((function(e){return{parent:t,node:e,html:e.outerHTML,index:j(e,r)}}));return{container:a({node:t,itemCount:o.length}),items:o.map((function(a){return e(a,t)}))}},q=function(t,e,a){var n;if(void 0===a&&(a="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof a&&(n=e.classList).add.apply(n,a.split(" ")),e},U=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["height","padding-top","padding-bottom"].map((function(t){var a=parseInt(e.getPropertyValue(t),10);return isNaN(a)?0:a})).reduce((function(t,e){return t+e}))},W=function(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter((function(t){return t.querySelector(e)instanceof HTMLElement||t.shadowRoot&&t.shadowRoot.querySelector(e)instanceof HTMLElement})).map((function(t){return t.querySelector(e)||t.shadowRoot&&t.shadowRoot.querySelector(e)}))},z=function(t){return t.composedPath&&t.composedPath()[0]||t.target},X=function(t,e,a){return{element:t,posX:a.pageX-e.left,posY:a.pageY-e.top}},G=function(t,e,a){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(a||(a=X),t.dataTransfer&&t.dataTransfer.setDragImage){var n=a(e,A(e),t);if(!(n.element instanceof HTMLElement)||"number"!=typeof n.posX||"number"!=typeof n.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",z(t).id),t.dataTransfer.setDragImage(n.element,n.posX,n.posY)}},V=function(t,e){if(!0===t.isSortable){var a=P(t).getConfig("acceptFrom");if(null!==a&&!1!==a&&"string"!=typeof a)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==a)return!1!==a&&a.split(",").filter((function(t){return t.length>0&&e.matches(t)})).length>0;if(t===e)return!0;if(void 0!==P(t).getConfig("connectWith")&&null!==P(t).getConfig("connectWith"))return P(t).getConfig("connectWith")===P(e).getConfig("connectWith")}return!1},J={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null};var K,Q,Z,tt,et,at,nt,rt,ot=function(t,e){if("string"==typeof P(t).getConfig("hoverClass")){var a=P(t).getConfig("hoverClass").split(" ");!0===e?(I(t,"mousemove",function(t,e){var a=this;if(void 0===e&&(e=250),"function"!=typeof t)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var n=null;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=Date.now();(null===n||i-n>=e)&&(n=i,t.apply(a,r))}}((function(e){0===e.buttons&&L(t.children,P(t).getConfig("items")).forEach((function(t){var n,r;t!==e.target?(n=t.classList).remove.apply(n,a):(r=t.classList).add.apply(r,a)}))}),P(t).getConfig("throttleTime"))),I(t,"mouseleave",(function(){L(t.children,P(t).getConfig("items")).forEach((function(t){var e;(e=t.classList).remove.apply(e,a)}))}))):(M(t,"mousemove"),M(t,"mouseleave"))}},it=function(t){M(t,"dragstart"),M(t,"dragend"),M(t,"dragover"),M(t,"dragenter"),M(t,"drop"),M(t,"mouseenter"),M(t,"mouseleave")},st=function(t,e){var a=t;return!0===P(e).getConfig("copy")&&(D(a=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(a),a.style.display="none",a.oldDisplay=t.style.display),a},lt=function(t){var e;(e=t).h5s&&delete e.h5s.data,H(t,"aria-dropeffect")},ct=function(t){H(t,"aria-grabbed"),H(t,"aria-copied"),H(t,"draggable"),H(t,"role")};function ut(t,e){if(e.composedPath)return e.composedPath().find((function(t){return t.isSortable}));for(;!0!==t.isSortable;)t=t.parentElement;return t}function mt(t,e){var a=N(t,"opts"),n=L(t.children,a.items).filter((function(t){return t.contains(e)||t.shadowRoot&&t.shadowRoot.contains(e)}));return n.length>0?n[0]:e}var dt=function(t){var e=N(t,"opts"),a=L(t.children,e.items),n=W(a,e.handle);(D(t,"aria-dropeffect","move"),N(t,"_disabled","false"),D(n,"draggable","true"),!1===e.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&I(n,"mousedown",(function(){if(-1!==a.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===a.indexOf(t);)t=t.parentElement;t.dragDrop()}})))},pt=function(t){var e=N(t,"opts"),a=L(t.children,e.items),n=W(a,e.handle);N(t,"_disabled","false"),it(a),M(n,"mousedown"),M(t,"dragover"),M(t,"dragenter"),M(t,"drop")};function ft(t,e){var a=String(e);return e=e||{},"string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof HTMLElement&&(t=[t]),t=Array.prototype.slice.call(t),/serialize/.test(a)?t.map((function(t){var e=N(t,"opts");return R(t,e.itemSerializer,e.containerSerializer)})):(t.forEach((function(t){if(/enable|disable|destroy/.test(a))return ft[a](t);["connectWith","disableIEFix"].forEach((function(t){e.hasOwnProperty(t)&&null!==e[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),e=Object.assign({},J,P(t).config,e),P(t).config=e,N(t,"opts",e),t.isSortable=!0,pt(t);var n,r=L(t.children,e.items);if(null!==e.placeholder&&void 0!==e.placeholder){var o=document.createElement(t.tagName);e.placeholder instanceof HTMLElement?o.appendChild(e.placeholder):o.innerHTML=e.placeholder,n=o.children[0]}P(t).placeholder=q(t,n,e.placeholderClass),N(t,"items",e.items),e.acceptFrom?N(t,"acceptFrom",e.acceptFrom):e.connectWith&&N(t,"connectWith",e.connectWith),dt(t),D(r,"role","option"),D(r,"aria-grabbed","false"),ot(t,!0),I(t,"dragstart",(function(t){var a=z(t);if(!0!==a.isSortable&&(t.stopImmediatePropagation(),(!e.handle||a.matches(e.handle))&&"false"!==a.getAttribute("draggable"))){var n=ut(a,t),r=mt(n,a);at=L(n.children,e.items),tt=at.indexOf(r),et=j(r,n.children),Z=n,G(t,r,e.customDragImage),Q=U(r),r.classList.add(e.draggingClass),D(K=st(r,n),"aria-grabbed","true"),n.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:et,index:tt,container:Z},item:K,originalTarget:a}}))}})),I(t,"dragenter",(function(e){var a=z(e),n=ut(a,e);n&&n!==nt&&(rt=L(n.children,N(n,"items")).filter((function(e){return e!==P(t).placeholder})),n.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:et,index:tt,container:Z},destination:{container:n,itemsBeforeUpdate:rt},item:K,originalTarget:a}}))),nt=n})),I(t,"dragend",(function(a){if(K){K.classList.remove(e.draggingClass),D(K,"aria-grabbed","false"),"true"===K.getAttribute("aria-copied")&&"true"!==N(K,"dropped")&&K.remove(),K.style.display=K.oldDisplay,delete K.oldDisplay;var n=Array.from(C.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(F)[0];n&&n.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:et,index:tt,container:Z},item:K}})),nt=null,K=null,Q=null}})),I(t,"drop",(function(a){if(V(t,K.parentElement)){a.preventDefault(),a.stopPropagation(),N(K,"dropped","true");var n=Array.from(C.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(F)[0];Y(n,K),n.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:et,index:tt,container:Z},item:K}}));var r=P(t).placeholder,o=L(Z.children,e.items).filter((function(t){return t!==r})),i=!0===this.isSortable?this:this.parentElement,s=L(i.children,N(i,"items")).filter((function(t){return t!==r})),l=j(K,Array.from(K.parentElement.children).filter((function(t){return t!==r}))),c=j(K,s);et===l&&Z===i||t.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:et,index:tt,container:Z,itemsBeforeUpdate:at,items:o},destination:{index:c,elementIndex:l,container:i,itemsBeforeUpdate:rt,items:s},item:K}}))}}));var i=S((function(t,a,n){if(K)if(e.forcePlaceholderSize&&(P(t).placeholder.style.height=Q+"px"),Array.from(t.children).indexOf(a)>-1){var r=U(a),o=j(P(t).placeholder,a.parentElement.children),i=j(a,a.parentElement.children);if(r>Q){var s=r-Q,l=A(a).top;if(o<i&&n<l)return;if(o>i&&n>l+r-s)return}void 0===K.oldDisplay&&(K.oldDisplay=K.style.display),"none"!==K.style.display&&(K.style.display="none");var c=!1;try{c=n>=A(a).top+a.offsetHeight/2}catch(t){c=o<i}c?Y(a,P(t).placeholder):B(a,P(t).placeholder),Array.from(C.values()).filter((function(t){return void 0!==t.placeholder})).forEach((function(e){e.placeholder!==P(t).placeholder&&e.placeholder.remove()}))}else{var u=Array.from(C.values()).filter((function(t){return void 0!==t.placeholder})).map((function(t){return t.placeholder}));-1!==u.indexOf(a)||t!==a||L(a.children,e.items).length||(u.forEach((function(t){return t.remove()})),a.appendChild(P(t).placeholder))}}),e.debounce),s=function(t){var e=t.target,a=!0===e.isSortable?e:ut(e,t);if(e=mt(a,e),K&&V(a,K.parentElement)&&"true"!==N(a,"_disabled")){var n=N(a,"opts");parseInt(n.maxItems)&&L(a.children,N(a,"items")).length>=parseInt(n.maxItems)&&K.parentElement!==a||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=!0===P(a).getConfig("copy")?"copy":"move",i(a,e,t.pageY))}};I(r.concat(t),"dragover",s),I(r.concat(t),"dragenter",s)})),t)}ft.destroy=function(t){!function(t){var e=N(t,"opts")||{},a=L(t.children,e.items),n=W(a,e.handle);M(t,"dragover"),M(t,"dragenter"),M(t,"drop"),lt(t),M(n,"mousedown"),it(a),ct(a)}(t)},ft.enable=function(t){dt(t)},ft.disable=function(t){!function(t){var e=N(t,"opts"),a=L(t.children,e.items),n=W(a,e.handle);D(t,"aria-dropeffect","none"),N(t,"_disabled","true"),D(n,"draggable","false"),M(n,"mousedown")}(t)},ft.__testing={_data:N,_removeItemEvents:it,_removeItemData:ct,_removeSortableData:lt};var gt=ft,ht=a(18),vt=a.n(ht),bt=a(19),yt=a.n(bt),wt=a(43),_t=a.n(wt),Et=a(44),Tt=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var a=e.prototype;return a.init=function(){t.prototype.init.call(this),this.tag=this.props.tag||app.store.createRecord("tags"),this.name=m.prop(this.tag.name()||""),this.slug=m.prop(this.tag.slug()||""),this.description=m.prop(this.tag.description()||""),this.color=m.prop(this.tag.color()||""),this.icon=m.prop(this.tag.icon()||""),this.isHidden=m.prop(this.tag.isHidden()||!1),this.imagePath=m.prop(this.tag.imagePath()||""),this.showInTagLabels=m.prop(this.tag.showInTagLabels()||!1),this.displayOrder=m.prop(this.tag.displayOrder()||!1),this.showonHomePage=m.prop(this.tag.showonHomePage()||!1),this.bannerImagePath=m.prop(this.tag.bannerImagePath()||!1)},a.className=function(){return"EditTagModal Modal--small"},a.title=function(){return this.name()?Object(g.a)({name:this.name,color:this.color,icon:this.icon,imagePath:this.imagePath}):app.translator.trans("flarum-tags.admin.edit_tag.title")},a.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray(),m("div",{className:"Form-group"},m("label",null,"Image Path"),m("input",{className:"FormControl",placeholder:"Enter image URL",value:this.imagePath(),oninput:m.withAttr("value",this.imagePath)})),m("div",{className:"Form-group"},m("label",null,"Banner Image Path"),m("input",{className:"FormControl",placeholder:"Enter Banner image URL",value:this.bannerImagePath(),oninput:m.withAttr("value",this.bannerImagePath)})),m("div",{className:"Form-group"},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",value:"1",checked:this.showInTagLabels(),onchange:m.withAttr("checked",this.showInTagLabels)}),"Show Label in Label List?"))),m("div",{className:"Form-group"},m("label",null,"Display Order On Home Page"),m("input",{className:"FormControl",value:this.displayOrder(),oninput:m.withAttr("value",this.displayOrder)})),m("div",{className:"Form-group"},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",value:"1",checked:this.showonHomePage(),onchange:m.withAttr("checked",this.showonHomePage)}),"Show Tag Deals On Home Page?")))))},a.fields=function(){var t=this,e=new _t.a;return e.add("name",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.name_label")),m("input",{className:"FormControl",placeholder:app.translator.trans("flarum-tags.admin.edit_tag.name_placeholder"),value:this.name(),oninput:function(e){t.name(e.target.value),t.slug(Object(Et.slug)(e.target.value))}})),50),e.add("slug",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.slug_label")),m("input",{className:"FormControl",value:this.slug(),oninput:m.withAttr("value",this.slug)})),40),e.add("description",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.description_label")),m("textarea",{className:"FormControl",value:this.description(),oninput:m.withAttr("value",this.description)})),30),e.add("color",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.color_label")),m("input",{className:"FormControl",placeholder:"#aaaaaa",value:this.color(),oninput:m.withAttr("value",this.color)})),20),e.add("icon",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.icon_label")),m("div",{className:"helpText"},app.translator.trans("flarum-tags.admin.edit_tag.icon_text",{a:m("a",{href:"https://fontawesome.com/icons?m=free",tabindex:"-1"})})),m("input",{className:"FormControl",placeholder:"fas fa-bolt",value:this.icon(),oninput:m.withAttr("value",this.icon)})),10),e.add("hidden",m("div",{className:"Form-group"},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",value:"1",checked:this.isHidden(),onchange:m.withAttr("checked",this.isHidden)}),app.translator.trans("flarum-tags.admin.edit_tag.hide_label")))),10),e.add("submit",m("div",{className:"Form-group"},f.a.component({type:"submit",className:"Button Button--primary EditTagModal-save",loading:this.loading,children:app.translator.trans("flarum-tags.admin.edit_tag.submit_button")}),this.tag.exists?m("button",{type:"button",className:"Button EditTagModal-delete",onclick:this.delete.bind(this)},app.translator.trans("flarum-tags.admin.edit_tag.delete_tag_button")):""),-10),e},a.submitData=function(){return{name:this.name(),slug:this.slug(),description:this.description(),color:this.color(),icon:this.icon(),isHidden:this.isHidden(),imagePath:this.imagePath(),showInTagLabels:this.showInTagLabels(),displayOrder:this.displayOrder(),showonHomePage:this.showonHomePage(),bannerImagePath:this.bannerImagePath()}},a.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.tag.save(this.submitData()).then((function(){return e.hide()}),(function(t){e.loading=!1,e.handleErrors(t)}))},a.delete=function(){var t=this;if(confirm(app.translator.trans("flarum-tags.admin.edit_tag.delete_tag_confirmation"))){var e=app.store.all("tags").filter((function(e){return e.parent()===t.tag}));this.tag.delete().then((function(){e.forEach((function(t){return t.pushData({attributes:{isChild:!1},relationships:{parent:null}})})),m.redraw()})),this.hide()}},e}(yt.a),xt=a(45),Nt=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var a=e.prototype;return a.setMinTags=function(t,e,a){t(a),e(Math.max(a,e()))},a.className=function(){return"TagSettingsModal Modal--small"},a.title=function(){return app.translator.trans("flarum-tags.admin.tag_settings.title")},a.form=function(){var t=this.setting("flarum-tags.min_primary_tags",0),e=this.setting("flarum-tags.max_primary_tags",0),a=this.setting("flarum-tags.min_secondary_tags",0),n=this.setting("flarum-tags.max_secondary_tags",0);return[m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.tag_settings.required_primary_heading")),m("div",{className:"helpText"},app.translator.trans("flarum-tags.admin.tag_settings.required_primary_text")),m("div",{className:"TagSettingsModal-rangeInput"},m("input",{className:"FormControl",type:"number",min:"0",value:t(),oninput:m.withAttr("value",this.setMinTags.bind(this,t,e))}),app.translator.trans("flarum-tags.admin.tag_settings.range_separator_text"),m("input",{className:"FormControl",type:"number",min:t(),bidi:e}))),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.tag_settings.required_secondary_heading")),m("div",{className:"helpText"},app.translator.trans("flarum-tags.admin.tag_settings.required_secondary_text")),m("div",{className:"TagSettingsModal-rangeInput"},m("input",{className:"FormControl",type:"number",min:"0",value:a(),oninput:m.withAttr("value",this.setMinTags.bind(this,a,n))}),app.translator.trans("flarum-tags.admin.tag_settings.range_separator_text"),m("input",{className:"FormControl",type:"number",min:a(),bidi:n})))]},e}(a.n(xt).a);function Lt(t){return m("li",{"data-id":t.id(),style:{color:t.color()}},m("div",{className:"TagListItem-info"},Object(h.a)(t),m("span",{className:"TagListItem-name"},t.name()),f.a.component({className:"Button Button--link",icon:"fas fa-pencil-alt",onclick:function(){return app.modal.show(new Tt({tag:t}))}})),t.isChild()||null===t.position()?"":m("ol",{className:"TagListItem-children"},Object(v.a)(app.store.all("tags")).filter((function(e){return e.parent()===t})).map(Lt)))}var Ct=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var a=e.prototype;return a.view=function(){return m("div",{className:"TagsPage"},m("div",{className:"TagsPage-header"},m("div",{className:"container"},m("p",null,app.translator.trans("flarum-tags.admin.tags.about_tags_text")),f.a.component({className:"Button Button--primary",icon:"fas fa-plus",children:app.translator.trans("flarum-tags.admin.tags.create_tag_button"),onclick:function(){return app.modal.show(new Tt)}}),f.a.component({className:"Button",children:app.translator.trans("flarum-tags.admin.tags.settings_button"),onclick:function(){return app.modal.show(new Nt)}}))),m("div",{className:"TagsPage-list"},m("div",{className:"container"},m("div",{className:"TagGroup"},m("label",null,app.translator.trans("flarum-tags.admin.tags.primary_heading")),m("ol",{className:"TagList TagList--primary"},Object(v.a)(app.store.all("tags")).filter((function(t){return null!==t.position()&&!t.isChild()})).map(Lt))),m("div",{className:"TagGroup"},m("label",null,app.translator.trans("flarum-tags.admin.tags.secondary_heading")),m("ul",{className:"TagList"},app.store.all("tags").filter((function(t){return null===t.position()})).sort((function(t,e){return t.name().localeCompare(e.name())})).map(Lt))))))},a.config=function(){gt(this.$("ol, ul"),{acceptFrom:"ol,ul"}).forEach(this.onSortUpdate.bind(this))},a.onSortUpdate=function(t){var e=this;t.addEventListener("sortupdate",(function(t){t.detail.origin.container instanceof HTMLOListElement&&t.detail.destination.container instanceof HTMLUListElement&&app.store.getById("tags",t.detail.item.getAttribute("data-id")).pushData({attributes:{position:null,isChild:!1},relationships:{parent:null}});var a=e.$(".TagList--primary > li").map((function(){return{id:$(this).data("id"),children:$(this).find("li").map((function(){return $(this).data("id")})).get()}})).get();a.forEach((function(t,e){var a=app.store.getById("tags",t.id);a.pushData({attributes:{position:e,isChild:!1},relationships:{parent:null}}),t.children.forEach((function(t,e){app.store.getById("tags",t).pushData({attributes:{position:e,isChild:!0},relationships:{parent:a}})}))})),app.request({url:app.forum.attribute("apiUrl")+"/tags/order",method:"POST",data:{order:a}}),m.redraw.strategy("all"),m.redraw()}))},e}(vt.a),Ot=function(){app.routes.tags={path:"/tags",component:Ct.component()},app.extensionSettings["flarum-tags"]=function(){return m.route(app.route("tags"))},Object(o.extend)(_.a.prototype,"items",(function(t){t.add("tags",T.a.component({href:app.route("tags"),icon:"fas fa-tags",children:app.translator.trans("flarum-tags.admin.nav.tags_button"),description:app.translator.trans("flarum-tags.admin.nav.tags_text")}))}))},Pt=a(46),It=a.n(Pt),Mt=function(){Object(o.extend)(It.a.prototype,"homePageItems",(function(t){t.add("tags",{path:"/tags",label:app.translator.trans("flarum-tags.admin.basics.tags_label")})}))},Dt=a(47),Ht=a.n(Dt),At=function(){Object(o.extend)(s.a.prototype,"startItems",(function(t){t.add("allowTagChange",{icon:"fas fa-tag",label:app.translator.trans("flarum-tags.admin.permissions.allow_edit_tags_label"),setting:function(){var t=parseInt(app.data.settings.allow_tag_change,10);return Ht.a.component({defaultLabel:t?app.translator.transChoice("core.admin.permissions_controls.allow_some_minutes_button",t,{count:t}):app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_tag_change",options:[{value:"-1",label:app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:app.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:app.translator.trans("core.admin.permissions_controls.allow_until_reply_button")}]})}},90)}))},St=a(20),jt=Object(n.a)(St.a,{"tags/addTagsHomePageOption":Mt,"tags/addTagChangePermission":At,"tags/addTagsPane":Ot,"tags/components/TagSettingsModal":Nt,"tags/components/TagsPage":Ct,"tags/components/EditTagModal":Tt,"tags/addTagPermission":y,"tags/addTagsPermissionScope":b}),Ft=a(21);app.initializers.add("flarum-tags",(function(t){t.store.models.tags=r.a,b(),y(),Ot(),Mt(),At()})),Object(n.a)(Ft.compat,jt)},,,,,,,,,,,,function(t,e){t.exports=flarum.core.compat["components/PermissionDropdown"]},function(t,e){t.exports=flarum.core.compat["components/Dropdown"]},function(t,e){t.exports=flarum.core.compat["components/AdminNav"]},function(t,e){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,e){t.exports=flarum.core.compat["utils/ItemList"]},function(t,e){t.exports=flarum.core.compat["utils/string"]},function(t,e){t.exports=flarum.core.compat["components/SettingsModal"]},function(t,e){t.exports=flarum.core.compat["components/BasicsPage"]},function(t,e){t.exports=flarum.core.compat["components/SettingDropdown"]},,function(t,e,a){"use strict";a.r(e);var n=a(15);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a(27)}]);
//# sourceMappingURL=admin.js.map